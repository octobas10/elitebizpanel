<?php
class AstoriaCompanyController extends Controller {
    public function __construct() {
    }
    /**
     * Create Ping Request for Lender
     */
    
    public static $projectListFromBuyer = [
        60 => 'Additions and Remodels',
		61 => 'Appraisers and Home Inspectors',
		62 => 'Architects',
		63 => 'Bathroom Remodeling',
		64 => 'Cabinets and Countertops',
		65 => 'Carpentry',
		66 => 'Carpet',
		67 => 'Cleaning',
		68 => 'Concrete and Masonry',
		69 => 'Custom Homes',
		70 => 'Decks and Porches',
		71 => 'Decorators and Designers',
		72 => 'Doors',
		73 => 'Drywall',
		74 => 'Electrical',
		75 => 'Engineers',
		76 => 'Fences',
		77 => 'Flooring',
		78 => 'Foundations',
		79 => 'Garage Doors',
		80 => 'Handyman',
		97 => 'Home Security',
		81 => 'HVAC',
		125 => 'Insulation',
		82 => 'Kitchen Remodeling',
		83 => 'Landscaping',
		84 => 'Moving',
		85 => 'Painting',
		86 => 'Pest Control',
		87 => 'Plumbing',
		88 => 'Roofing',
		89 => 'Siding',
		90 => 'Small Projects and Repairs',
		91 => 'Solar Energy',
		92 => 'Sunrooms',
		93 => 'Swimming Pools',
		94 => 'Tile Work',
		95 => 'Walls',
		96 => 'Windows',
    ];
    public static $taskListFromBuyer = [
		1 => 'Additions - Closet',
		2 => 'Additions - Garage',
		3 => 'Additions - To Existing Structure',
		4 => 'Remodel - Accommodate a Disability',
		5 => 'Remodel - Basement',
		6 => 'Remodel - Garage',
		7 => 'Remodel - Multiple Rooms',
		8 => 'Other',
		9 => 'Appraisers - Real Estate',
		10 => 'Inspection - General Home',
		11 => 'Inspection - Roofing',
		12 => 'Other',
		13 => 'Cabinets - Custom Build',
		14 => 'Cabinets - Install',
		15 => 'Cabinets - Reface',
		16 => 'Cabinets - Refinish',
		17 => 'Countertops - Install Stone',
		18 => 'Other',
		19 => 'Built - InFurniture - Construct',
		20 => 'ExteriorTrim - Install',
		21 => 'Framing - Install',
		22 => 'Interior Trim & Moldings - Install',
		23 => 'Other',
		24 => 'Carpet Cleaning',
		25 => 'Install Carpets',
		26 => 'Other',
		27 => 'BuildingSite - PreparationandClearing',
		28 => 'Cleaning - Exterior',
		29 => 'Cleaning - Interior',
		30 => 'Toxicity and Mold Removal',
		31 => 'Other',
		32 => 'Brick and Stone Patios , Walks & Steps',
		33 => 'Driveways & Floors - Install',
		34 => 'Driveways & Floors - Install Inter locking Paving',
		35 => 'Patios,Walks&Steps - InstallInterlockingPaving',
		36 => 'Stamped Concrete - Install',
		37 => 'Other',
		38 => 'Buildor Replace',
		39 => 'Repair',
		40 => 'Designer - Bathroom',
		41 => 'Designer - Building',
		42 => 'Designer - Interior Lighting Plan',
		43 => 'Designer - Kitchen',
		44 => 'Designer - Landscape',
		45 => 'Designer - Residential',
		46 => 'Interior Decorator',
		47 => 'Stagea Home',
		48 => 'Other',
		49 => 'Install Exterior Doors',
		50 => 'Install Interior Doors',
		51 => 'Install Sliding Door(s)',
		52 => 'Install Drywall',
		53 => 'Repair Drywall',
		54 => 'Electrical Wiring or Panel Upgrade',
		55 => 'Install a Generator',
		56 => 'Install Electrical for Home Addition or Remodel',
		57 => 'Install Home Automation System',
		58 => 'Install Home Theater Surround Sound',
		59 => 'Install Home Theater System or Media Center',
		60 => 'Install Home Theater Wiring',
		61 => 'Other',
		62 => 'Install Aluminum or Steel Fence',
		63 => 'Install Wood Fence',
		64 => 'Repair Wood Fence',
		65 => 'Other',
		66 => 'Install Simulated Wood or Stone Laminate Flooring',
		67 => 'Install Wood Flooring',
		68 => 'Refinish Wood Flooring',
		69 => 'Other',
		70 => 'Concrete Foundation - Repair',
		71 => 'Install Central A/C',
		72 => 'Install Gas or Electric Boiler or Radiator',
		73 => 'Install Gas or Electric Furnace',
		74 => 'Install Heat Pump',
		75 => 'Install Oil Boiler or Radiator',
		76 => 'Install Oil Furnace',
		77 => 'Install Swamp Cooler',
		78 => 'Other',
		79 => 'Foundation Drainage Install',
		80 => 'Fountain or Water fall Install',
		81 => 'Gazeboor Freest and ingPorch - BuildorInstall',
		82 => 'Greenhouse or Conservatorium - Build',
		83 => 'Landscaping for Yardor Garden',
		84 => 'Pond Install',
		85 => 'Retaining Walls Over 3ft',
		86 => 'Retaining Walls Under 3ft',
		87 => 'Other',
		88 => 'Professional Moving Service - LongDistance / Out of State',
		89 => 'Other',
		90 => 'Exterior Painting',
		91 => 'Interior Painting',
		92 => 'Specialty Painting - FauxFinishes',
		93 => 'Specialty Painting - Textures',
		94 => 'Other',
		95 => 'Installa Water Heater',
		96 => 'Installor Replacea Sewer Main',
		97 => 'Installor Replacea Water Main',
		98 => 'Install Plumbing for an Addition or Remodel',
		99 => 'Plumbing Repair',
		100 => 'Other',
		101 => 'Install Asphalt Shingle Roofing',
		102 => 'Install Flat, Foam, or Single Ply Roofing',
		103 => 'Install Gutters',
		104 => 'Install Metal Roofing',
		105 => 'Install Natural Slate Roofing',
		106 => 'Install Traditional Tile Roofing',
		107 => 'Install Woodor Composite Roofing',
		108 => 'Roofing Repair',
		109 => 'Other',
		110 => 'Install Brickor StoneSiding',
		111 => 'Install Metal Siding',
		112 => 'Install Stucco Siding',
		113 => 'Install Vinyl Siding',
		114 => 'Install Wood or Fiber - CementSiding',
		115 => 'Other',
		116 => 'Solar Electrical',
		117 => 'Solar Thermal',
		118 => 'BuildorInstallaSwimmingPool',
		119 => 'RemodelaSwimmingPool',
		120 => 'Other',
		121 => 'Install Ceramic & Porcelain Tile',
		122 => 'Install Natural Stone Tile',
		123 => 'Tile Repair',
		124 => 'Other',
		125 => 'Install Brick, Stone or Block Wall',
		126 => 'Install Plaster',
		127 => 'Other',
		128 => 'Install Multiple Windows',
		129 => 'Install One Window',
		130 => 'Install Storm Windows',
		131 => 'Window Cleaning',
		132 => 'Residential Alarm or Security System - Install',
		133 => 'Surveillance Cameras - Install or Repair',
		134 => 'Residential Alarm or Security System - Monitor',
		135 => 'Other',
		136 => 'Business Alarm or Security System - Install',
		137 => 'Install Batt, Rolled or Reflective Insulation',
		138 => 'Install Blown-In Insulation',
		139 => 'Install Sound proofing Insulation',
		140 => 'Install Spray Foam Insulation',
		141 => 'Other',
    ];
    public static $providerListFromBuyer = [
        1 => 'Unsure/Not Listed',
		2 => 'AECO (Alabama Electric Company)',
		3 => 'Alabama Power',
		4 => 'Alameda Municipal Power',
		5 => 'Alaska Villages Electric Cooperative',
		6 => 'Allegheny Power',
		7 => 'Alliant Energy',
		8 => 'Ambit Energy',
		9 => 'Ameren',
		10 => 'American Electric Power',
		11 => 'Amigo Energy',
		12 => 'Anaheim Public Utilities',
		13 => 'Appalachian Power',
		14 => 'Arizona Public Service',
		15 => 'Ashland Electric',
		16 => 'Atlantic City Electric',
		17 => 'Austin Energy',
		18 => 'Avista Utilities',
		19 => 'Azusa Light & Water',
		20 => 'Baltimore Gas & Electric',
		21 => 'Bangor Hydro Electric',
		22 => 'Basin Electric Power Cooperative',
		23 => 'Batavia Municipal Electric',
		24 => 'Bear Valley Electric',
		25 => 'Beauregard Electric CO-OP',
		26 => 'Benton PUD',
		27 => 'Berea Municipal Utilities',
		28 => 'Berkeley Electric Cooperative',
		29 => 'Berkshire Company',
		30 => 'Big Rivers Electric Corporation',
		31 => 'Black Hills Energy',
		32 => 'Black Hills Power',
		33 => 'Blue Grass Energy',
		34 => 'Blue Ridge Electrical Membership Corp.',
		35 => 'Borough of Ellwood City',
		36 => 'Bounce Energy',
		37 => 'Braintree Electric Light Department',
		38 => 'Brigham City Public Power',
		39 => 'Brunswick EMC',
		40 => 'Bryan Texas Utilities',
		41 => 'Burbank Water & Power',
		42 => 'Caddo Electric Cooperative',
		43 => 'California Public Utilities Commission',
		44 => 'Calpine',
		45 => 'Canby Electric',
		46 => 'Carteret-Craven Electric Cooperative',
		47 => 'CenterPoint Energy',
		48 => 'Central Electric Power Cooperative',
		49 => 'Central Hudson Gas & Electric',
		50 => 'Central Maine Power',
		51 => 'Central Montana Electric Power Cooperative',
		52 => 'Central Power Electric Cooperative',
		53 => 'Central Vermont Public Service',
		54 => 'CH Energy Group',
		55 => 'Champion Energy Services',
		56 => 'Chariton Valley Electric Cooperative',
		57 => 'Chelan County Public Utility District',
		58 => 'Cherokee Electric Cooperative',
		59 => 'Cheyenne Light Fuel & Power',
		60 => 'Choptank Electric Cooperative',
		61 => 'Chugach Electric Association',
		62 => 'Cincinnati Bell Energy',
		63 => 'Cirro Energy',
		64 => 'Citizens Choice Energy Jamestown BPU',
		65 => 'Citizens Electric of Lewisburg',
		66 => 'Citizens Utilities Board',
		67 => 'City & County of San Francisco',
		68 => 'City of Dover Electric Department',
		69 => 'City of Milford Electric Department',
		70 => 'City of Palo Alto Utilities',
		71 => 'City of Rock Hill',
		72 => 'City of Safford Electric Department',
		73 => 'City of Tallahassee Utilities',
		74 => 'City of Vero Beach',
		75 => 'City Utilities of Springfield',
		76 => 'Claverack REC',
		77 => 'Clay Electric Co-op',
		78 => 'Clearwater Power',
		79 => 'CLECO',
		80 => 'Cleveland Electric Illuminating Company',
		81 => 'Coast Electric',
		82 => 'College Station Utilities',
		83 => 'Colorado Springs Utilities',
		84 => 'Colton Public Utilities Glendale Public Service Department',
		85 => 'Columbia REA',
		86 => 'Columbia River Public Utility District',
		87 => 'ComEd Electric Company',
		88 => 'Connecticut Light & Power',
		89 => 'Connecticut Natural Gas',
		90 => 'Consolidated Edison Company of New York (Con Edison)',
		91 => 'Consolidated Electric Cooperative',
		92 => 'Consumers Energy',
		93 => 'Copper Valley Electric Association',
		94 => 'Coserv Electric',
		95 => 'Coweta Fayette EMC',
		96 => 'CPS Energy',
		97 => 'Dairyland Power Co-op',
		98 => 'Danville Utilities',
		99 => 'Dayton Power & Light',
		100 => 'Delaware Electric Cooperative',
		101 => 'Delmarva Power',
		102 => 'DEMCO',
		103 => 'Denton Municipal Electric',
		104 => 'Direct Energy',
		105 => 'Dominion Virginia Power',
		106 => 'Douglas County Public Utility District',
		107 => 'dPi Energy',
		108 => 'DTE Energy (Detroit Edison)',
		109 => 'Duke Energy',
		110 => 'Duke Energy Indiana',
		111 => 'Duke Energy Kentucky',
		112 => 'Duke Energy NC',
		113 => 'Duke Energy Ohio',
		114 => 'Duke Energy SC',
		115 => 'Duncan Valley Electric Cooperative',
		116 => 'Duquesne Light',
		117 => 'East River Electric Cooperative',
		118 => 'East River Electric Power Co-op',
		119 => 'Eau Claire Energy Cooperative',
		120 => 'El Paso Electric',
		121 => 'Electric Database Publishing',
		122 => 'Electric Power Board',
		123 => 'Electrical District No. 2',
		124 => 'ElectriCities',
		125 => 'Emerald PUD',
		126 => 'Empire District Electric Company',
		127 => 'Entergy',
		128 => 'Entrust Energy',
		129 => 'Eugene Water & Electric Board',
		130 => 'Everything Energy',
		131 => 'Excel Energy',
		132 => 'Farmers Electrical Cooperative',
		133 => 'Farmington Electric Utility System',
		134 => 'First Electric Cooperative',
		135 => 'First Texas Energy Corporation',
		136 => 'FirstEnergy',
		137 => 'Fleming-Mason Energy Cooperative',
		138 => 'Flint Energies',
		139 => 'Florida Municipal Power Agency',
		140 => 'Florida Power & Light',
		141 => 'Florida Public Utility Company Palm Beach',
		142 => 'Gainesville Regional Utilities',
		143 => 'Garland Power and Light',
		144 => 'Georgetown Utility Services (GUS)',
		145 => 'Georgia EMC',
		146 => 'Georgia Power',
		147 => 'Gexa Energy',
		148 => 'Golden Valley Electric Association',
		149 => 'Granite State Electric',
		150 => 'Grant County Public Utility District',
		151 => 'Great River Energy',
		152 => 'Green Island Power Authority',
		153 => 'Green Mountain Energy',
		154 => 'Green Mountain Power',
		155 => 'Gridley Municipal Utilities',
		156 => 'Guadalupe Valley Electric Cooperative',
		157 => 'Gulf Power',
		158 => 'GVEC',
		159 => 'Halifax Electric Membership',
		160 => 'Hawaiian Electric Company (HECO)',
		161 => 'Hawaiian Electric Industries',
		162 => 'Healdsburg Municipal Electric Department',
		163 => 'Henderson Municipal Power and Light',
		164 => 'High Plains Power',
		165 => 'High West Energy',
		166 => 'Highline Electric Association',
		167 => 'Holden Municipal Light Department',
		168 => 'Holland Board of Public Works',
		169 => 'Holy Cross Energy Company',
		170 => 'Howard Electric Cooperative',
		171 => 'Hutchinson Utilities Commission',
		172 => 'Hyrum City Power & Light',
		173 => 'IDACORP',
		174 => 'Idaho Power',
		175 => 'Imperial Irrigation District',
		176 => 'Independence Power and Light',
		177 => 'Indianapolis Power & Light',
		178 => 'Intermountain Power Agency',
		179 => 'Intermountain Rural Electric Association',
		180 => 'International Electric Power (IEP)',
		181 => 'Interstate Power and Light Company',
		182 => 'ITC Midwest',
		183 => 'Jackson',
		184 => 'JEA',
		185 => 'Jersey Central Power and Light Company',
		186 => 'Jones-Onslow EMC',
		187 => 'Just Energy',
		188 => 'Kansas City Board of Public Utilities',
		189 => 'Kansas City Power & Light',
		190 => 'Kauai Island Utility Cooperative (KIUC)',
		191 => 'Kaysville City',
		192 => 'Kenergy Corp',
		193 => 'Kentucky Utilities',
		194 => 'Kingsport Power (Appalachian Power)',
		195 => 'Kissimmee Utility Authority',
		196 => 'Klickitat Public Utility District',
		197 => 'Knoxville Utilities Board',
		198 => 'Kodiak Electric Association',
		199 => 'L&O Power Co-op',
		200 => 'La Plata Electric Association',
		201 => 'Lafayette Utilities System',
		202 => 'Lake Country Power',
		203 => 'Lake Worth Utilities',
		204 => 'Lakeland Electric',
		205 => 'Lamar Light and Power',
		206 => 'Lansing Board of Water & Light',
		207 => 'LCEC',
		208 => 'Lenoir City Utilities Board',
		209 => 'Little River Electric Co-Op',
		210 => 'Lodi Electric Utility',
		211 => 'Long Island Power Authority (LIPA)',
		212 => 'Lorain Medina Rural Electric Cooperative',
		213 => 'Los Angeles Department of Water and Power',
		214 => 'Louisville Gas & Electric',
		215 => 'Lower Colorado River Authority',
		216 => 'Lower Valley Energy',
		217 => 'Lumbee River EMC',
		218 => 'Luminant',
		219 => 'Madison Gas and Electric',
		220 => 'Magic Valley',
		221 => 'Magnolia Electric',
		222 => 'Mansfield Municipal Electric',
		223 => 'Marblehead Electric Light Department',
		224 => 'Marshall Municipal Utilities',
		225 => 'Mason County Public Utility District 3',
		226 => 'Massachusetts Electric',
		227 => 'Massachusetts Municipal Wholesale Electric Company (MMWEC)',
		228 => 'Massena Electric Department',
		229 => 'Maui Electric Company',
		230 => 'MDU',
		231 => 'Memphis Light Gas and Water',
		232 => 'Met-Ed',
		233 => 'MidAmerican Energy',
		234 => 'Midwest Energy',
		235 => 'Minnesota Power',
		236 => 'Minnkota Power Cooperative',
		237 => 'Mississippi Power Company',
		238 => 'Missouri River Energy Services',
		239 => 'Modesto Irrigation District',
		240 => 'Mojave Electric Cooperative',
		241 => 'Montana Electric Cooperatives Association',
		242 => 'Montana-Dakota Utilities',
		243 => 'Mountain Utilities',
		244 => 'Municipal Light & Power',
		245 => 'Nantucket Electric',
		246 => 'Narragansett Electric',
		247 => 'Nashville Electric Service',
		248 => 'National Grid',
		249 => 'Navopache Electric Cooperative',
		250 => 'Nebraska Public Power District',
		251 => 'Nevada Power',
		252 => 'New York Power Authority (NYPA)',
		253 => 'New York State Electric & Gas (NYSEG)',
		254 => 'New-Mac Electric',
		255 => 'Norris Electric Cooperative',
		256 => 'North Carolina Electric Membership Corp.',
		257 => 'North Little Rock Electric',
		258 => 'Northeast Utilities',
		259 => 'Northern Indiana Public Service Company',
		260 => 'Northern Neck Electric Cooperative',
		261 => 'Northwestern Energy',
		262 => 'NOVEC',
		263 => 'NRG Energy',
		264 => 'NSTAR',
		265 => 'NV Energy',
		266 => 'Ocala Electric',
		267 => 'Ohio Edison',
		268 => 'Oklahoma Gas & Electric',
		269 => 'Omaha Public Power District',
		270 => 'Oncor Electric (Formerly TXU)',
		271 => 'Orange & Rockland',
		272 => 'Orlando Utilities Commission',
		273 => 'Otter Tail Power Company',
		274 => 'Overton Power District No 5',
		275 => 'Owensboro Municipal Utilities',
		276 => 'Pacific Gas & Electric',
		277 => 'PacifiCorp',
		278 => 'PacifiCorp (Pacific Power)',
		279 => 'PacifiCorp (Rocky Mountain Power)',
		280 => 'Pasadena Water & Power',
		281 => 'Peabody Municipal Light Plant',
		282 => 'PECO',
		283 => 'Pedernales Electric Cooperative',
		284 => 'Penelec',
		285 => 'Penn Power',
		286 => 'Pennywise Power',
		287 => 'People',
		288 => 'PEPCO',
		289 => 'Pike County Light & Power Company',
		290 => 'Portland General Electric',
		291 => 'Potomoc Edison (FirstEnergy)',
		292 => 'PowerSouth Energy Cooperative',
		293 => 'PPL',
		294 => 'Progress Energy Carolinas',
		295 => 'Progress Energy Florida',
		296 => 'Public Service Company of New Mexico',
		297 => 'Public Service Company of Oklahoma',
		298 => 'Public Service Electric and Gas Company (PSE&G)',
		299 => 'Public Service of NH',
		300 => 'Puget Sound Energy',
		301 => 'PWC Fayetteville',
		302 => 'Randolph Electric Membership Corp',
		303 => 'Rappahannock Electric Cooperative',
		304 => 'Redding Electric Utility (REU)',
		305 => 'Reliant Energy',
		306 => 'River Falls Municipal Utility',
		307 => 'Riverside Public Utilities',
		308 => 'Rochester Gas & Electric',
		309 => 'Rochester Public Utilities',
		310 => 'Rural Valley Electric Co.',
		311 => 'Rushmore Electric Cooperative',
		312 => 'Sacramento Municipal Utility District',
		313 => 'Salem Electric',
		314 => 'Salt River Electric',
		315 => 'Salt River Project',
		316 => 'Sam Houston Electric',
		317 => 'San Diego Gas & Electric',
		318 => 'Santee Cooper',
		319 => 'Sawnee EMC',
		320 => 'Seattle City Light',
		321 => 'SELCO',
		322 => 'Shenandoah Valley Electric Cooperative',
		323 => 'Sierra Pacific Power',
		324 => 'Sierra-Pacific Power',
		325 => 'Silicon Valley Power',
		326 => 'SLECMO',
		327 => 'Snohomish County Public Utility District (PUD)',
		328 => 'Source Power and Gas',
		329 => 'South Carolina Electric & Gas Company',
		330 => 'South Central Power Company',
		331 => 'Southern California Edison',
		332 => 'Southern California Public Power Authority',
		333 => 'Southern Maryland Electric Cooperative',
		334 => 'Southern Rivers Energy',
		335 => 'Southwest Mississippi Electric Power Association',
		336 => 'Southwestern Electric Power Company (SWEPCO)',
		337 => 'Springfield City Water Light & Power',
		338 => 'Star Tex Power',
		339 => 'Sterling Municipal Light Department',
		340 => 'Stream Energy',
		341 => 'Sulphur Springs Valley Electric Cooperative',
		342 => 'Summer Energy',
		343 => 'Superior Plus Utility',
		344 => 'Surprise Valley Power',
		345 => 'Sussex Rural Electric Cooperative',
		346 => 'SWEPCO',
		347 => 'Tacoma Power',
		348 => 'Tara Energy',
		349 => 'TECO',
		350 => 'Tennessee Jackson Energy Authority',
		351 => 'Tennessee Valley Authority',
		352 => 'Texas Electric Service Company',
		353 => 'Tideland EMC',
		354 => 'Tillamook PUD',
		355 => 'Toledo Edison',
		356 => 'Town of Vienna',
		357 => 'Tri Eagle Energy',
		358 => 'Trico Electric Cooperative',
		359 => 'Tri-County Electric',
		360 => 'Trinity PUD',
		361 => 'Trinity Valley Electric Cooperative',
		362 => 'Tucson Electric Power',
		363 => 'Turlock Irrigation District (TID)',
		364 => 'UGI Utilities',
		365 => 'UniSource Energy Services',
		366 => 'United Cooperative Services',
		367 => 'United Illuminating',
		368 => 'United Power Inc',
		369 => 'Unitil Corporation',
		370 => 'Upper Missouri G&T Cooperative',
		371 => 'Upper Peninsula Power Company',
		372 => 'Valley Electric Association',
		373 => 'Vernon Light & Power',
		374 => 'Vineland Municipal Electric Utility',
		375 => 'Wake Electric',
		376 => 'Wakefield Municipal Gas and Light Department',
		377 => 'Wallingford Electric',
		378 => 'Wasco Electric',
		379 => 'Washington - St. Tammany Electric Cooperative',
		380 => 'We Energies',
		381 => 'Weakley County Municipal Electric System',
		382 => 'Wellsboro Electric Company',
		383 => 'West Oregon Electric Cooperative',
		384 => 'Westar Energy',
		385 => 'Western Massachusetts Electric',
		386 => 'Wheeling Electric Power (AEP Ohio)',
		387 => 'WIlson Energy',
		388 => 'Wiregrass Electric Cooperative',
		389 => 'Wisconsin Power and Light Company',
		390 => 'Wisconsin Public Service Corporation',
		391 => 'Withlacoochee River Electric Cooperative',
		392 => 'WTU Retail Energy',
		393 => 'Wyandotte Municipal Services',
		394 => 'Xcel Energy',
		395 => 'XOOM Energy',
		396 => 'Eversource',
    ];
    public static function returnPingData($p1 = false, $p2 = false, $p3 = false, $status = 0) {
		$promo_code = Yii::app()->request->getParam('promo_code');
		$submission_model = new Submissions();
		/*$task_data  = $submission_model->getMatchingTaskFromPublisher(self::$taskListFromBuyer,self::$taskListFromBuyer[0]);
		$project_data  = $submission_model->getMatchingProjectFromPublisher(self::$projectListFromBuyer,self::$projectListFromBuyer[0]);
		$project_type = Yii::app()->request->getParam('project_type');*/
		$project_type = Yii::app()->request->getParam('project_type');
		$task_type = Yii::app()->request->getParam('task');
		$task_type = explode('_',$task_type);
		$project_data = $submission_model->getAstoriaTasksById($project_type,$task_type[1]);
		if($promo_code != 2 && $promo_code != 8){
			$pingData = [];
			$fields = [
				'lead_type' => $p1?$p1:'18',
				'lead_mode' => '1',
				'vendor_id' => $p2?$p2:'442',
				'sub_id' => $promo_code,
				'tcpa_optin' => Yii::app()->request->getParam('tcpa_optin',0),
				'tcpa_text' => Yii::app()->request->getParam('tcpa_text'),
				'universal_leadid'=>Yii::app()->request->getParam('universal_leadid'),
				'origination_datetime' => date('Y-m-d H:i:s'),
				'origination_timezone' => '1',
				'ipaddress' => Yii::app()->request->getParam('ipaddress'),
				'user_agent'=>Yii::app()->request->getParam('user_agent'),
				'vendor_lead_id' => Yii::app()->request->getParam('vendor_lead_id'),
				'url' => Yii::app()->request->getParam('url'),
				'zip' => Yii::app()->request->getParam('zip'),
				'user_agent' => Yii::app()->request->getParam('user_agent'),
				'project' => $project_data['project_id'],
				'task' => $project_data['task_id'],
				'timeframe'=>Yii::app()->request->getParam('time_frame'),
				'home_owner'=>Yii::app()->request->getParam('home_owner')=='0' ? '0' : '1',
				'project_status'=>Yii::app()->request->getParam('project_status'),
				'additional_info'=>Yii::app()->request->getParam('comments'),
				'xxtrustedformcerturl'=>Yii::app()->request->getParam('trustedformcerturl'),
			];
			if($project_type == 45 ){// SOLAR
				$provider_data  = $submission_model->getMatchingProviderFromPublisher(self::$providerListFromBuyer,self::$providerListFromBuyer[0]);
				$campaign['current_provider'] = $provider_data['provider_id']==0?1:$provider_data['provider_id'];
				$campaign['monthly_bill'] = Yii::app()->request->getParam('monthly_bill');
				$campaign['property_type'] = Yii::app()->request->getParam('property_type');
				$campaign['roof_type'] =Yii::app()->request->getParam('roof_type');
				$campaign['roof_shade'] = Yii::app()->request->getParam('roof_shade');
				$campaign['credit_rating'] = Yii::app()->request->getParam('credit_rating');
				$fields += $campaign;
			}
			$pingData['ping_request'] = http_build_query($fields);
			$pingData['header'] = ["application/x-www-form-urlencoded"];
			
			return $pingData;
		}
    }
    /**
     * Preg Match the Lender Ping Full XML/JSON Response.
     */
    public static function returnPingResponse($ping_response) {
		if(!empty($ping_response)){
			preg_match("/<Response>(.*)<\/Response>/msui", $ping_response, $result);
			if (trim($result[1]) == 'Accepted' || trim($result[0]) == 'Accepted') {
				preg_match("/<Price>(.*)<\/Price>/msui", $ping_response, $price);
				preg_match("/<Confirmation>(.*)<\/Confirmation>/msui", $ping_response, $confirmation_id);
				$ping_price = isset($price[1]) ? $price[1] : 0;
				$confirmation_id = $confirmation_id [1];
				$ping_response_info['ping_price'] = trim($ping_price);
				$ping_response_info['ping_status'] = '1';
				$ping_response_info['confirmation_id'] = $confirmation_id;
			} else {
				$ping_price = 0;
				$ping_response_info['ping_price'] = $ping_price;
				$ping_response_info['ping_status'] = '0';
				$ping_response_info['confirmation_id'] = '';
			}
		}else{
			$ping_price = 0;
			$ping_response_info['ping_price'] = $ping_price;
			$ping_response_info['ping_status'] = '0';
			$ping_response_info['confirmation_id'] = '';
		}
        return $ping_response_info;
    }
    /**
     * Send Post Data to Lender
     */
    public static function sendPostData($p1, $p2, $p3, $ping_response, $post_url, $status) {
		
		$promo_code = Yii::app()->request->getParam('promo_code');
		$submission_model = new Submissions();
		/*$task_data  = $submission_model->getMatchingTaskFromPublisher(self::$taskListFromBuyer,self::$taskListFromBuyer[0]);
		$project_data  = $submission_model->getMatchingProjectFromPublisher(self::$projectListFromBuyer,self::$projectListFromBuyer[0]);
		$project_type = Yii::app()->request->getParam('project_type');*/
		$project_type = Yii::app()->request->getParam('project_type');
		$task_type = Yii::app()->request->getParam('task');
		$task_type = explode('_',$task_type);
		$project_data = $submission_model->getAstoriaTasksById($project_type,$task_type[1]);
		if($promo_code != 2 && $promo_code != 8){
			preg_match("/<Confirmation>(.*)<\/Confirmation>/msui", $ping_response, $confirmation_id);
			$fields = [
				'confirmation_id' => $confirmation_id[1], 
				'lead_type' => $p1?$p1:'18',
				'lead_mode' => '1',
				'vendor_id' => $p2?$p2:'442',
				'sub_id' => $promo_code,
				'tcpa_optin' => Yii::app()->request->getParam('tcpa_optin',0),
				'tcpa_text' => Yii::app()->request->getParam('tcpa_text'),
				'universal_leadid'=>Yii::app()->request->getParam('universal_leadid'),
				'origination_datetime' => date('Y-m-d H:i:s'),
				'origination_timezone' => '1',
				'ipaddress' => Yii::app()->request->getParam('ipaddress'),
				'user_agent'=>Yii::app()->request->getParam('user_agent'),
				'vendor_lead_id' => Yii::app()->request->getParam('vendor_lead_id'),
				'url' => Yii::app()->request->getParam('url'),
				'zip' => Yii::app()->request->getParam('zip'),
				'first_name' => Yii::app()->request->getParam('first_name'),
				'last_name' => Yii::app()->request->getParam('last_name'),
				'email' => Yii::app()->request->getParam('email'),
				'address' => Yii::app()->request->getParam('address'),
				'primary_phone' => Yii::app()->request->getParam('phone'),
				'secondary_phone' => Yii::app()->request->getParam('phone2'),
				'project' => $project_data['project_id'],
				'task' => $project_data['task_id'],
				'timeframe'=>Yii::app()->request->getParam('time_frame'),
				'home_owner'=>Yii::app()->request->getParam('home_owner')=='0' ? '0' : '1',
				'project_status'=>Yii::app()->request->getParam('project_status'),
				'additional_info'=>Yii::app()->request->getParam('comments'),
				'xxtrustedformcerturl'=>Yii::app()->request->getParam('trustedformcerturl'),
			];
			if($project_type == 45 ){// SOLAR
				$provider_data  = $submission_model->getMatchingProviderFromPublisher(self::$providerListFromBuyer,self::$providerListFromBuyer[0]);
				$campaign['current_provider'] = $provider_data['provider_id']==0?1:$provider_data['provider_id'];
				$campaign['monthly_bill'] = Yii::app()->request->getParam('monthly_bill');
				$campaign['property_type'] = Yii::app()->request->getParam('property_type');
				$campaign['roof_type'] =Yii::app()->request->getParam('roof_type');
				$campaign['roof_shade'] = Yii::app()->request->getParam('roof_shade');
				$campaign['credit_rating'] = Yii::app()->request->getParam('credit_rating');
				$fields += $campaign;
			}
			$post_request = http_build_query($fields);
			//echo '<pre>';print_r($post_request);
			$cm = new CommonMethods();
			$start_time = CommonToolsMethods::stopwatch();
			$header = ["application/x-www-form-urlencoded"];
        	$post_response = $cm->curl($post_url,$post_request,$header);
			$time_end = CommonToolsMethods::stopwatch();
			preg_match("/<Response>(.*)<\/Response>/", $post_response, $success);
			//echo '<pre>';print_r();die();
			if (trim($success[1]) == 'Accepted') {
				$post_status = '1';
				preg_match("/<Redirect>(.*)<\/Redirect>/", $post_response, $redirect);
				$redirect_url = isset($redirect[1]) ? $redirect[1] : '';
				preg_match("/<Price>(.*)<\/Price>/msui", $post_response, $price);
				preg_match("/<Price>(.*)<\/Price>/msui", $ping_response, $ping_price);
				$post_price = isset($price[1]) ? $price[1] : $ping_price[1];
			} else {
				$post_status = '0';
				$post_price = 0;
				$redirect_url = '';
			}
			$post_time = ($time_end - $start_time);
			$post_responses['post_request'] = $post_request;
			$post_responses['post_response'] = $post_response;
			$post_responses['post_status'] = $post_status;
			$post_responses['post_price'] = $post_price;
			$post_responses['redirect_url'] = $redirect_url;
			$post_responses['post_time'] = $post_time;
			/*if($_SERVER['REMOTE_ADDR'] == '82.17.180.215'){
				echo '<pre>..test';print_r($post_responses);exit;
			}*/
			return $post_responses;
		}
    }
}